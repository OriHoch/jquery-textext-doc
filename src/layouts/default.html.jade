- var scripts = getBlock('scripts')
- var styles = getBlock('styles')

- scripts.add([ url('/textext/vendor/jquery.js'), url('/textext/vendor/coffee-script.js') ])

- var textextScripts = 'textext.jquery utils event_queue plugin items_manager items_plugin textext keys_plugin input_plugin tags_plugin autocomplete_plugin'
- scripts.add(textextScripts.replace(/([\w\.]+)/g, url('/textext/build') + '/$1.js').split(/\s+/g))

- var textextCss = 'textext input_plugin tags_plugin autocomplete_plugin'
- styles.add(textextCss.replace(/([\w\.]+)/g, url('/textext/build/css') + '/$1.css').split(/\s+/g))

- scripts.add([url('/scripts/sample-data.js'), url('/scripts/doc.js')])
- styles.add(url('/styles/style.css'))

doctype 5
html(lang="en")
  head

    //- Meta
    meta(charset="utf-8")
    meta(http-equiv="content-type", content="text/html; charset=utf-8")

    //-
      Use the .htaccess and remove these lines to avoid edge case issues.
      More info: h5bp.com/i/378
    meta(http-equiv="X-UA-Compatible", content="IE=edge,chrome=1")


    //- Our site title and description
    title= getPreparedTitle()
    meta(name="description", content=getPreparedDescription())
    meta(name="keywords", content=getPreparedKeywords())
    meta(name="author", content=site.author || '')

    //- Output DocPad produced meta elements
    != getBlock('meta').toHTML()

    //- Mobile viewport optimized: h5bp.com/viewport
    meta(name="viewport", content="width=device-width, initial-scale=1.0")

    //- Styles
    != styles.toHTML()

  body
    //- Markup
    //- .navbar.navbar-fixed-top
      .navbar-inner
        .container
          a.brand(href="/") Welcome
          ul.nav
            each doc in getCollection('pages').toJSON()
              - clazz = (document.url === doc.url) ? 'active' : null
              li(typeof="sioc:Page", about=doc.url, class=clazz)
                a(href=doc.url, property="dc:title")= doc.title

    .container-fluid
      .row-fluid
        .span3
          nav.span3
            h1: a(href=url('/')) TextExt #{version}
            h2: a(href=url('/textext/'), target="_blank") Run Spec

            .auto
        article.span9
          != content
          hr
          footer
            div= site.copyright
            div(style="font-style:italic; font-size: 12px") This website was last updated at #{site.date}

    //- Scripts
    != scripts.toHTML()

- if(!debug)
  script
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-83229-17']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
