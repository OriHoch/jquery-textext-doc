---
layout  : example
title   : Ajax With Autocomplete and Custom Data Objects
example : ajax autocomplete
id      : ajax-with-autocomplete-and-custom-data
---
{% include common.html %}

{% capture example_textarea %}
<p>You can type `name` or `id` of the record in the input box</p>
<textarea id="textarea" class="example" rows="1"></textarea>
{% endcapture %}

{% capture example_script %}
<script type="text/javascript">
/* custom_data.json
{% include custom_data.json %}
*/

	var ItemManagerAjax = $.fn.textext.ItemManagerAjax;

	function CustomItemManager() {}

	CustomItemManager.prototype = $.extend({}, new ItemManagerAjax(), {
		itemContains : function(item, needle)
		{
			return item.name.toLowerCase().indexOf(needle.toLowerCase()) === 0 || item.id == needle;
		},

		stringToItem : function(str)
		{
			var data = this.data,
				i
				;

			if(data)
				for(i = 0; i < data.length; i++)
					if(data[i].name === str)
						return data[i];

			return '';
		},

		itemToString : function(item)
		{
			return item.name;
		},

		compareItems : function(item1, item2)
		{
			return item1.name === item2.name && item1.id === item2.id;
		},

		getItemsFromAjax : function(data)
		{
			return data.items;
		}
	});

	$('#textarea')
		.textext({
			plugins     : 'autocomplete',
			itemManager : CustomItemManager,
			ajax        : {
				url          : '/manual/examples/custom_data.json',
				dataType     : 'json',
				cacheResults : true
			}
		})
	;
</script>
{% endcapture %}

{% include live_demo.html %}
